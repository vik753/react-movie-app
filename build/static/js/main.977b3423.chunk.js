(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{10:function(e,t,a){e.exports=a(19)},15:function(e,t,a){},17:function(e,t,a){},18:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(8),c=a.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(15);var o=a(1),s=a.n(o),l=a(2),u=a(3),p=a(4),d=a(6),m=a(5),f=function(e){var t=e.findMovieHandler,a=e.findFormClear,r=e.changeFilter;return n.a.createElement("header",null,n.a.createElement("div",{className:"header-wrapper"},n.a.createElement("h1",{id:"headerTitle"},"Movies by TMDB"),n.a.createElement("form",{name:"find-form",className:"find-form",onSubmit:t},n.a.createElement("input",{name:"find-input",type:"text",placeholder:"Type to find movie"}),n.a.createElement("i",{className:"fa fa-search"}),n.a.createElement("i",{className:"fa fa-close",onClick:a})),n.a.createElement("form",{name:"filter-form",className:"filter-form",onChange:r},n.a.createElement("h3",null,"Filter by: "),n.a.createElement("div",{className:"inputs-wrapper"},n.a.createElement("input",{id:"filter1",name:"filter",type:"radio","data-filter":"popularity.desc",defaultChecked:!0}),n.a.createElement("label",{htmlFor:"filter1"},"Popularity"),n.a.createElement("input",{id:"filter2",name:"filter",type:"radio","data-filter":"release_date.desc"}),n.a.createElement("label",{htmlFor:"filter2"},"Release date"),n.a.createElement("input",{id:"filter3",name:"filter",type:"radio","data-filter":"vote_average.desc"}),n.a.createElement("label",{htmlFor:"filter3"},"Vote"),n.a.createElement("input",{type:"checkbox",name:"filter_adult",id:"filter4",defaultChecked:!1}),n.a.createElement("label",{htmlFor:"filter4"},"Adult")))))},g=function(e){var t=e.bg;return n.a.createElement("main",null,n.a.createElement("div",{className:"main-bg",style:{backgroundImage:"".concat(t)}}),n.a.createElement("div",{className:"main-wrapper",id:"main-wrapper"},e.cards))},v=function(e){var t=e.state,a=e.paginationHandler,r=e.pageInputHandler;return n.a.createElement("footer",null,n.a.createElement("div",{className:"footer-wrapper"},n.a.createElement("button",{"data-page":"first",onClick:a,disabled:!(1!==t.page&&!t.error&&!t.isLoading),className:"primary"},"Page 1"),n.a.createElement("button",{"data-page":"previous",onClick:a,disabled:!(1!==t.page&&!t.error&&!t.isLoading),className:"primary"},n.a.createElement("i",{className:"fa fa-chevron-left"}),"Prev"),n.a.createElement("span",{"data-page":"current",className:"current-page"},"Current Page:",n.a.createElement("span",{className:"current-page__number"}," ",n.a.createElement("input",{id:"currentPage",type:"number",min:"1",max:t.total_pages,defaultValue:t.page,onKeyUp:r})," ","from ",t.total_pages)),n.a.createElement("button",{"data-page":"next",onClick:a,disabled:!(t.total_pages!==t.page&&!t.error&&!t.isLoading),className:"primary"},"Next",n.a.createElement("i",{className:"fa fa-chevron-right"}))))},h=a(9),b="https://api.themoviedb.org/3";function y(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})}var k=function(){var e=Object(l.a)(s.a.mark((function e(t,a,r,n){var i,c,o,l,u,p,d,m,f,g,v,k,E;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t,c=a,o=r,l=n,e.prev=4,u=null,p="",d="","search"===c&&l.length?(p="".concat(b,"/search"),d="query=".concat(l)):(p="".concat(b,"/discover"),d="sort_by=".concat(c)),e.next=11,fetch("".concat(p,"/movie?api_key=").concat("21629b2bbf4bb4857806d309dcfd1837","&language=en-US&").concat(d,"&include_adult=").concat(o,"&page=").concat(i));case 11:if((u=e.sent).ok){e.next=14;break}throw new Error("Cant fetch movies!");case 14:return e.next=16,u.json();case 16:return m=e.sent,f=m.page,g=m.total_pages,v=m.results,k=v.map((function(e){return Object(h.a)({},e,{banner:e.poster_path?"".concat("https://image.tmdb.org","/t/p/w500").concat(e.poster_path):"img/blank-img.jpg"})})),E=y(k),e.abrupt("return",{error:!1,page:f,total_pages:g,movies:E});case 23:return e.prev=23,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:!0,page:t,total_pages:null,movies:null});case 27:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),E=(a(17),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.rating,a=void 0===t?0:t,r=e.width,n=void 0===r?40:r,i=e.ratingColor,c=void 0===i?"#06cf10":i,o=e.ratingWidth,s=void 0===o?3:o,l=e.id,u=document.getElementById(l).getContext("2d"),p=3.6*(Math.PI/180);u.beginPath(),u.arc(n/2,n/2,n/2-s,0,100*p,!1),u.strokeStyle="#707070",u.lineWidth=s,u.stroke(),u.beginPath(),u.arc(n/2,n/2,n/2-s,0,p*(10*a),!1),u.lineWidth=s,u.strokeStyle="tomato",10*a>=80?u.strokeStyle=c:10*a>=40&&(u.strokeStyle="yellow"),u.lineWidth=s,u.stroke()}},{key:"render",value:function(){var e=this.props,t=e.rating,a=void 0===t?0:t,r=e.width,i=void 0===r?40:r,c=e.textColor,o=void 0===c?"#fff":c,s=e.bgColor,l=void 0===s?"#000":s,u=e.fontSize,p=void 0===u?"14":u,d=e.fontWeight,m=void 0===d?"normal":d,f=e.id;return n.a.createElement("div",{className:"canvas-wrapper",style:{overflow:"hidden",width:"".concat(i,"px"),height:"".concat(i,"px"),borderRadius:"50%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"".concat(l)}},n.a.createElement("canvas",{id:f,className:"canvas",width:i,height:i,style:{transform:"rotate(-90deg)",position:"absolute"}}),n.a.createElement("span",{className:"rating-label",style:{color:"".concat(o),fontSize:"".concat(p,"px"),fontWeight:"".concat(m),display:"block",position:"absolute",zIndex:"100"}},a||"NR",n.a.createElement("span",{style:{color:"".concat(o),fontSize:"".concat(p-6,"px"),fontWeight:"normal"}})))}}]),a}(n.a.Component)),x=function(e){var t=e.movie,a=t.release_date?t.release_date.slice(0,4):"No release data";return n.a.createElement("div",{className:"movie-card",onClick:function(){return e.cardClick("url(".concat(t.banner?t.banner:"./img/blank-img.jpg",")"))}},n.a.createElement("div",{className:"movie-bg",style:{backgroundImage:"url(".concat(t.banner?t.banner:"./img/blank-img.jpg",")")}}),n.a.createElement("div",{className:"movie-overview"},n.a.createElement("p",{className:"movie-year"},a),n.a.createElement("p",{className:"movie-title"},t.original_title),n.a.createElement("div",{className:"rating-wrapper"},n.a.createElement(E,{rating:Number(t.vote_average)||null,id:t.id}))))},w=(a(18),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).getMovies=Object(l.a)(s.a.mark((function t(){var a,r,n,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState((function(){return{isLoading:!0}}));case 2:return t.next=4,k(e.state.page,e.state.filter,e.state.adult,e.state.findMovie);case 4:return a=t.sent,r=a.error,n=a.page,i=a.total_pages,c=a.movies,t.next=11,e.setState((function(){return{error:r,movies:c,page:n,total_pages:i,isLoading:!1}}));case 11:document.documentElement.scrollTop=0,document.body.scrollTop=0;case 13:case"end":return t.stop()}}),t)}))),e.paginationHandler=function(){var t=Object(l.a)(s.a.mark((function t(a){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=document.querySelector("#currentPage"),n=a.target.dataset.page,t.t0=n,t.next="first"===t.t0?5:"previous"===t.t0?8:"next"===t.t0?11:14;break;case 5:return t.next=7,e.setState((function(){return{page:1}}));case 7:return t.abrupt("break",14);case 8:return t.next=10,e.setState((function(){return{page:1!==e.state.page?e.state.page-1:e.state.page}}));case 10:return t.abrupt("break",14);case 11:return t.next=13,e.setState((function(){return{page:e.state.page+1}}));case 13:return t.abrupt("break",14);case 14:return r.value=e.state.page,t.next=17,e.getMovies(e.state.page);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeFilter=function(){var t=Object(l.a)(s.a.mark((function t(a){var r,n,i;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector("#currentPage"),n=document.querySelector(".find-form"),"filter_adult"!==a.target.name){t.next=7;break}return t.next=5,e.setState((function(){return{adult:!e.state.adult,page:1}}));case 5:t.next=11;break;case 7:return i=a.target.dataset.filter,t.next=10,e.setState((function(){return{filter:i,page:1,findMovie:null}}));case 10:n.reset();case 11:r.value=e.state.page,e.getMovies();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.pageInputHandler=function(){var t=Object(l.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=a.target.value,!(13===a.keyCode&&r<=e.state.total_pages)){t.next=6;break}return t.next=5,e.setState((function(){return{page:r}}));case 5:e.getMovies();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findMovieHandler=function(){var t=Object(l.a)(s.a.mark((function t(a){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=a.target,!(n=r.elements["find-input"].value.trim()).length){t.next=7;break}return e.setState((function(){return{filter:"search",findMovie:n,page:1}})),t.next=7,e.getMovies();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findFormClear=function(){var t=Object(l.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector("#currentPage"),document.querySelector(".find-form").reset(),t.next=5,e.setState((function(){return{filter:"popularity.desc",findMovie:null,page:1}}));case 5:return t.next=7,e.getMovies();case 7:r.value=e.state.page;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.clickCardHandler=function(){var t=Object(l.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState((function(){return{backgroundImage:a}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={error:!1,movies:null,page:1,total_pages:null,isLoading:!1,filter:"popularity.desc",adult:!1,findMovie:null,backgroundImage:"transparent"},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.getMovies();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=!this.state.movies||this.state.error?n.a.createElement("div",null,"Error for fetching movies... Connect with administrator, please."):Object.values(this.state.movies).map((function(t,a){return n.a.createElement(x,{movie:t,key:t.id,cardClick:e.clickCardHandler})}));return n.a.createElement("div",{className:"app-wrapper"},n.a.createElement(f,{findMovieHandler:this.findMovieHandler,findFormClear:this.findFormClear,changeFilter:this.changeFilter}),n.a.createElement(g,{cards:t,bg:this.state.backgroundImage}),n.a.createElement(v,{state:this.state,paginationHandler:this.paginationHandler,pageInputHandler:this.pageInputHandler}))}}]),a}(r.Component));c.a.render(n.a.createElement(w,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[10,1,2]]]);
//# sourceMappingURL=main.977b3423.chunk.js.map