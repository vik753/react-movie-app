(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{21:function(e,t,a){e.exports=a(37)},26:function(e,t,a){},28:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),o=a.n(c),i=a(6);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(26);var l=a(1),s=a.n(l),u=a(5),m=a(8),p=a(9),d=a(10),f=a(11),v=a(2),g=(a(28),Object(v.e)((function(e){var t=e.location.pathname,a=e.findMovieHandler,r=e.findFormClear,c=e.changeFilter;return n.a.createElement("header",null,n.a.createElement("div",{className:"header-wrapper"},n.a.createElement("h1",{id:"headerTitle"},"Movies by TMDB"),"/"===t?n.a.createElement(n.a.Fragment,null,n.a.createElement("form",{name:"find-form",className:"find-form",onSubmit:a},n.a.createElement("input",{name:"find-input",type:"text",placeholder:"Type to find movie"}),n.a.createElement("i",{className:"fa fa-search"}),n.a.createElement("i",{className:"fa fa-close",onClick:r})),n.a.createElement("form",{name:"filter-form",className:"filter-form",onChange:c},n.a.createElement("h3",null,"Filter by: "),n.a.createElement("div",{className:"inputs-wrapper"},n.a.createElement("input",{id:"filter1",name:"filter",type:"radio","data-filter":"popularity.desc",defaultChecked:!0}),n.a.createElement("label",{htmlFor:"filter1"},"Popularity"),n.a.createElement("input",{id:"filter2",name:"filter",type:"radio","data-filter":"release_date.desc"}),n.a.createElement("label",{htmlFor:"filter2"},"Release date"),n.a.createElement("input",{id:"filter3",name:"filter",type:"radio","data-filter":"vote_average.desc"}),n.a.createElement("label",{htmlFor:"filter3"},"Vote"),n.a.createElement("input",{type:"checkbox",name:"filter_adult",id:"filter4",defaultChecked:!1}),n.a.createElement("label",{htmlFor:"filter4"},"Adult")))):null))}))),h=Object(v.e)((function(e){var t=e.bg;return n.a.createElement("main",null,n.a.createElement("div",{className:"main-bg",style:{backgroundImage:"".concat(t)}}),n.a.createElement("div",{className:"main-wrapper",id:"main-wrapper"},e.cards))})),b=Object(v.e)((function(e){var t=e.state,a=e.paginationHandler,r=e.pageInputHandler,c=e.location.pathname;return n.a.createElement("footer",null,n.a.createElement("div",{className:"footer-wrapper"},"/"===c?n.a.createElement(n.a.Fragment,null,n.a.createElement("button",{"data-page":"first",onClick:a,disabled:!(1!==t.page&&!t.error&&!t.isLoading),className:"primary"},"Page 1"),n.a.createElement("button",{"data-page":"previous",onClick:a,disabled:!(1!==t.page&&!t.error&&!t.isLoading),className:"primary"},n.a.createElement("i",{className:"fa fa-chevron-left"}),"Prev"),n.a.createElement("span",{"data-page":"current",className:"current-page"},"Current Page:",n.a.createElement("span",{className:"current-page__number"}," ",n.a.createElement("input",{id:"currentPage",type:"number",min:"1",max:t.total_pages,defaultValue:t.page,onKeyUp:r})," ","from ",t.total_pages)),n.a.createElement("button",{"data-page":"next",onClick:a,disabled:!(t.total_pages!==t.page&&!t.error&&!t.isLoading),className:"primary"},"Next",n.a.createElement("i",{className:"fa fa-chevron-right"}))):null))})),E=a(20),y="https://api.themoviedb.org/3";function k(e){return e.reduce((function(e,t){return e[t.id]=t,e}),{})}var x=function(){var e=Object(u.a)(s.a.mark((function e(t,a,r,n){var c,o,i,l,u,m,p,d,f,v,g,h,b;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t,o=a,i=r,l=n,e.prev=4,u=null,m="",p="","search"===o&&l.length?(m="".concat(y,"/search"),p="query=".concat(l)):(m="".concat(y,"/discover"),p="sort_by=".concat(o)),e.next=11,fetch("".concat(m,"/movie?api_key=").concat("21629b2bbf4bb4857806d309dcfd1837","&language=en-US&").concat(p,"&include_adult=").concat(i,"&page=").concat(c));case 11:if((u=e.sent).ok){e.next=14;break}throw new Error("Cant fetch movies!");case 14:return e.next=16,u.json();case 16:return d=e.sent,f=d.page,v=d.total_pages,g=d.results,h=g.map((function(e){return Object(E.a)({},e,{banner:e.poster_path?"".concat("https://image.tmdb.org","/t/p/w500").concat(e.poster_path):"img/blank-img.jpg"})})),b=k(h),e.abrupt("return",{error:!1,page:f,total_pages:v,movies:b});case 23:return e.prev=23,e.t0=e.catch(4),console.log(e.t0),e.abrupt("return",{error:!0,page:t,total_pages:null,movies:null});case 27:case"end":return e.stop()}}),e,null,[[4,23]])})));return function(t,a,r,n){return e.apply(this,arguments)}}(),w=(a(34),function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.rating,a=void 0===t?0:t,r=e.width,n=void 0===r?40:r,c=e.ratingColor,o=void 0===c?"#06cf10":c,i=e.ratingWidth,l=void 0===i?3:i,s=e.id,u=document.getElementById(s).getContext("2d"),m=3.6*(Math.PI/180);u.beginPath(),u.arc(n/2,n/2,n/2-l,0,100*m,!1),u.strokeStyle="#707070",u.lineWidth=l,u.stroke(),u.beginPath(),u.arc(n/2,n/2,n/2-l,0,m*(10*a),!1),u.lineWidth=l,u.strokeStyle="tomato",10*a>=80?u.strokeStyle=o:10*a>=40&&(u.strokeStyle="yellow"),u.lineWidth=l,u.stroke()}},{key:"render",value:function(){var e=this.props,t=e.rating,a=void 0===t?0:t,r=e.width,c=void 0===r?40:r,o=e.textColor,i=void 0===o?"#fff":o,l=e.bgColor,s=void 0===l?"#000":l,u=e.fontSize,m=void 0===u?"14":u,p=e.fontWeight,d=void 0===p?"normal":p,f=e.id;return n.a.createElement("div",{className:"canvas-wrapper",style:{overflow:"hidden",width:"".concat(c,"px"),height:"".concat(c,"px"),borderRadius:"50%",position:"relative",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"".concat(s)}},n.a.createElement("canvas",{id:f,className:"canvas",width:c,height:c,style:{transform:"rotate(-90deg)",position:"absolute"}}),n.a.createElement("span",{className:"rating-label",style:{color:"".concat(i),fontSize:"".concat(m,"px"),fontWeight:"".concat(d),display:"block",position:"absolute",zIndex:"100"}},a||"NR",n.a.createElement("span",{style:{color:"".concat(i),fontSize:"".concat(m-6,"px"),fontWeight:"normal"}})))}}]),a}(n.a.Component)),N=function(e){var t=e.movie,a=t.release_date?t.release_date.slice(0,4):"No release data";return n.a.createElement("div",{className:"movie-card",onMouseOver:function(){return e.mouseOverCard("url(".concat(t.banner?t.banner:"./img/blank-img.jpg",")"))},onClick:function(){return e.cardClick(t)}},n.a.createElement("div",{className:"movie-bg",style:{backgroundImage:"url(".concat(t.banner?t.banner:"./img/blank-img.jpg",")")}}),n.a.createElement("div",{className:"movie-overview"},n.a.createElement("p",{className:"movie-year"},a),n.a.createElement("p",{className:"movie-title"},t.original_title),n.a.createElement("div",{className:"rating-wrapper"},n.a.createElement(w,{rating:Number(t.vote_average)||null,id:t.id}))))},j=(a(35),a(36),Object(v.e)((function(e){var t=e.currentMovie;if(!Object.values(e.currentMovie).length)return n.a.createElement("h1",null,"No data...");var a=e.currentMovie,r=a.original_title,c=a.overview,o=a.popularity,l=a.release_date,s=a.vote_average,u=a.vote_count;return n.a.createElement("main",{className:"about-movie"},n.a.createElement("div",{className:"about-movie__wrapper"},n.a.createElement("div",{className:"movie-banner",style:{backgroundImage:"url(".concat(t.banner?t.banner:"./img/blank-img.jpg",")")}},n.a.createElement(i.b,{to:"/",className:"goHomeButton"},"Go to home page")),n.a.createElement("div",{className:"movie-article"},n.a.createElement("h1",null,r||""),n.a.createElement("article",null,n.a.createElement("p",null,"Release date: ",l||""),n.a.createElement("p",null,c||""),n.a.createElement("p",null,"Popularity: ",o||""),s?n.a.createElement("p",{style:Number(s)>=8?{color:"#00ec00"}:Number(s)>=5?{color:"yellow"}:{color:"tomato"}},"Vote: ",s,", count: ",u):""))))}))),C=function(e){Object(f.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).getMovies=Object(u.a)(s.a.mark((function t(){var a,r,n,c,o;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState((function(){return{isLoading:!0}}));case 2:return t.next=4,x(e.state.page,e.state.filter,e.state.adult,e.state.findMovie);case 4:return a=t.sent,r=a.error,n=a.page,c=a.total_pages,o=a.movies,t.next=11,e.setState((function(){return{error:r,movies:o,page:n,total_pages:c,isLoading:!1}}));case 11:document.documentElement.scrollTop=0,document.body.scrollTop=0;case 13:case"end":return t.stop()}}),t)}))),e.paginationHandler=function(){var t=Object(u.a)(s.a.mark((function t(a){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=document.querySelector("#currentPage"),n=a.target.dataset.page,t.t0=n,t.next="first"===t.t0?5:"previous"===t.t0?8:"next"===t.t0?11:14;break;case 5:return t.next=7,e.setState((function(){return{page:1}}));case 7:return t.abrupt("break",14);case 8:return t.next=10,e.setState((function(){return{page:1!==e.state.page?e.state.page-1:e.state.page}}));case 10:return t.abrupt("break",14);case 11:return t.next=13,e.setState((function(){return{page:e.state.page+1}}));case 13:return t.abrupt("break",14);case 14:return r.value=e.state.page,t.next=17,e.getMovies(e.state.page);case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.changeFilter=function(){var t=Object(u.a)(s.a.mark((function t(a){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=document.querySelector("#currentPage"),n=document.querySelector(".find-form"),"filter_adult"!==a.target.name){t.next=7;break}return t.next=5,e.setState((function(){return{adult:!e.state.adult,page:1}}));case 5:t.next=11;break;case 7:return c=a.target.dataset.filter,t.next=10,e.setState((function(){return{filter:c,page:1,findMovie:null}}));case 10:n.reset();case 11:return r.value=e.state.page,t.next=14,e.getMovies();case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.pageInputHandler=function(){var t=Object(u.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=a.target.value,!(13===a.keyCode&&r<=e.state.total_pages)){t.next=7;break}return t.next=5,e.setState((function(){return{page:r}}));case 5:return t.next=7,e.getMovies();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findMovieHandler=function(){var t=Object(u.a)(s.a.mark((function t(a){var r,n,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),r=document.querySelector("#currentPage"),n=a.target,!(c=n.elements["find-input"].value.trim()).length){t.next=9;break}return t.next=7,e.setState((function(){return{filter:"search",findMovie:c,page:1}}));case 7:return t.next=9,e.getMovies();case 9:r.value=e.state.page;case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.findFormClear=function(){var t=Object(u.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=document.querySelector("#currentPage"),document.querySelector(".find-form").reset(),t.next=5,e.setState((function(){return{filter:"popularity.desc",findMovie:null,page:1}}));case 5:return t.next=7,e.getMovies();case 7:r.value=e.state.page;case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.mouseOverCardHandler=function(){var t=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState((function(){return{backgroundImage:a}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.cardClickHandler=function(){var t=Object(u.a)(s.a.mark((function t(a){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState((function(){return{currentMovie:a}}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.state={error:!1,movies:null,page:1,total_pages:null,isLoading:!1,filter:"popularity.desc",adult:!1,findMovie:null,backgroundImage:"transparent",currentMovie:null},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.getMovies()}},{key:"render",value:function(){var e=this,t=!this.state.movies||this.state.error?n.a.createElement("div",null,"Error for fetching movies... Connect with administrator, please."):Object.values(this.state.movies).map((function(t,a){return n.a.createElement(i.b,{className:"cardLink",to:"/".concat(t.id),key:t.id},n.a.createElement(N,{movie:t,mouseOverCard:e.mouseOverCardHandler,cardClick:e.cardClickHandler}))}));return n.a.createElement("div",{className:"app-wrapper"},n.a.createElement(g,{findMovieHandler:this.findMovieHandler,findFormClear:this.findFormClear,changeFilter:this.changeFilter}),n.a.createElement(v.a,{path:"/",exact:!0,render:function(a){return n.a.createElement(h,Object.assign({},a,{cards:t,bg:e.state.backgroundImage}))}}),n.a.createElement(v.a,{path:"/:id",render:function(t){return n.a.createElement(j,Object.assign({},t,{currentMovie:e.state.currentMovie}))}}),n.a.createElement(b,{state:this.state,paginationHandler:this.paginationHandler,pageInputHandler:this.pageInputHandler}))}}]),a}(r.Component),O=n.a.createElement(i.a,null,n.a.createElement(C,null));o.a.render(O,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[21,1,2]]]);
//# sourceMappingURL=main.6bb27184.chunk.js.map